<html>

<head>
<script src="clientlib.js"></script>
<script>
var service = "ecmascript-logger";

function go(fn)
{
    setTimeout(fn, 100);
}

function setup()
{
    proxy.configure();

    if (!proxy.enable(service))	{
	alert( "No service: " + service );
        return;
    }

    //proxy.onReceive = function (x) { alert(x.responseText); }

    proxy.POST("/" + service, "<set-parameters reformat=\"yes\"/>" );

    go(getData);
}

function getData()
{
    try {
        var x = proxy.GET( "/" + service );
	var p = document.createElement("pre");
	p.appendChild(document.importNode(x.getElementsByTagName("source")[0].firstChild, true));
	document.getElementById("sources").appendChild(p);

	go(getData);
    }
    catch (e) {
	alert( "FAILURE: " + e );
    }
}
</script>
</head>

<body onload="go(setup)">
<div id="sources">
</div>
</body>

</html>
